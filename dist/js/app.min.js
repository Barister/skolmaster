(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){setTimeout((function(){let e=document.querySelector(".modal-form__email");e&&(e.style.display="none",e.style.visibility="hidden")}),1e3)}));let e=document.querySelectorAll(".btn"),t=document.querySelector(".modal-form");const o=document.querySelector("#form"),s=document.querySelector("body");function c(e){e.stopPropagation(),t.classList.add("active"),o.classList.add("active"),document.addEventListener("click",n),o.addEventListener("submit",i),s.classList.toggle("scroll-lock")}function n(e){e.target.closest("#form")&&!e.target.closest(".modal-form__close")||r()}function r(){t.classList.remove("active"),o.classList.remove("active"),s.classList.toggle("scroll-lock"),l.textContent="",l.classList.remove("err","ok")}e.forEach((e=>{e.addEventListener("click",c)}));const a=/^(\+7|7|8|9)\d{9,}$/;let l=t.querySelector(".modal-form__result");function i(e){e.preventDefault();const t=o.querySelector("#email"),s=o.querySelector("#checkbox"),c=o.querySelector("#phone");a.test(c.value)&&s&&!t.value?async function(e){try{const t=await fetch(e.target.action,{method:"POST",body:new FormData(e.target)});if(!t.ok)throw`Error accessing the server: ${t.status}`;const s=t.headers.get("content-type");if(!s||!s.includes("application/json"))throw"Processing error. The response is not JSON";const c=await t.json();"success"===c.result?(l.textContent="Заявка успешна отправлена.",l.classList.add("ok"),setTimeout(r,3e3),o.reset()):(console.log(c),l.textContent=`Ошибка отправки заявки 1. ${c.info}`,l.classList.add("err"))}catch(e){l.textContent=`Ошибка отправки заявки 2. ${e}`,l.classList.add("err")}}(e):(console.log("Проверьте номер телефона на ошибки!"),l.textContent="Проверьте номер телефона на ошибки!",l.classList.add("err"))}var d,u;d=function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},(u=new Image).onload=u.onerror=function(){d(2==u.height)},u.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"})();